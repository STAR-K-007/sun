**太阳能自动追光系统**
太阳能智能追光系统主要由四部分组成，分别为单片机组成的中央处理单元、光电转换电路部分、A/D转换模块电路部分、步进电机驱动电路部分。
![image](https://github.com/STAR-K-007/sun/assets/90315370/7c158f18-5a66-40ae-b181-3c0c9ca3a5ef)

**光电转换电路**
光电转换装置接收太阳光将光信号转换成电信号，其原理是随着光照强度的变化，光敏电阻的阻值随光照强度变化而变化，从而实现数据的接收。

**A/D转换模块电路**
  光电转换电路输出的信号为模拟信号，所以采用A/D转换器，将模拟信号转换为数字信号，然后通过单片机进行处理。模拟量可以是电压、电流等信号，但在AD转换前，输入到AD转换器的输入信号必须是电压信号。AD转换后，输出的数字信号可以有8位、10位、12位和16位等。在本设计中采用的是PCF8591芯片，PCF8591 是一种具有 I2C 总线接口的 8 位 A/D D/A 转换芯片，在与 CPU的信息传输过程中仅靠时钟线 SCL 和数据线 SDA 就可以实现。
  通过正确设置A0、A1、A2地址引脚，可以在同一总线上使用多个PCF8591芯片，并且主控设备可以通过硬件地址识别和选择与之通信的特定PCF8591芯片。这种可编程硬件地址功能提供了灵活性和扩展性，使得PCF8591能够适应不同的系统需求。
  SCL引脚：SCL引脚是I2C总线上的时钟线，用于同步数据传输。主控设备通过控制SCL引脚的电平变化来生成时钟信号，从而指示数据传输的时序。在I2C通信中，SCL的上升沿和下降沿定义了数据的采样和传输时机。
  SDA引脚：SDA引脚是I2C总线上的数据线，用于传输数据。主控设备通过控制SDA引脚的电平变化来传输数据，包括发送和接收数据。数据传输是基于时钟信号的，每个数据位的传输由SCL引脚的时钟信号驱动。
  ![image](https://github.com/STAR-K-007/sun/assets/90315370/62e34bf2-2d74-44de-8afd-39108f381bdf)

**单片机控制电路**
89C51单片机有如下功能：
·8位CPU·4kbytes程序存储器(ROM) (52为8K)  
·128bytes的数据存储器(RAM) （52有256bytes的RAM） 
·32条I/O口线
·111条指令，大部分为单字节指令 
·21个专用寄存器  
·2个可编程定时/计数器
·5个中断源，2个优先级（52有6个） 
·一个全双工串行通信口  
·外部数据存储器寻址空间为64kB 
·外部程序存储器寻址空间为64kB  
·逻辑操作位寻址功能
·双列直插40PinDIP封装 
·单一+5V电源供电 
CPU：由运算和控制逻辑组成，同时还包括中断系统和部分外部特殊功能寄存器； 
RAM：用以存放可以读写的数据，如运算的中间结果、最终结果以及欲显示的数据；  
ROM：用以存放程序、一些原始数据和表格；  
I/O口：四个8位并行I/O口，既可用作输入，也可用作输出 
T/C：两个定时/记数器，既可以工作在定时模式，也可以工作在记数模式； 
五个中断源的中断控制系统; 
一个全双工UART（通用异步接收发送器）的串行I/O口，用于实现单片机之间或单片机与微机之间的串行通信； 
片内振荡器和时钟产生电路，石英晶体和微调电容需要外接。最佳振荡频率为6M—12M 。

图中各引脚连接：
LED1 、LED2是两个指示灯分别代表自动模式和手动模式;TX  RX是指串口通讯接口即程序下载接口；KEY1-KEY5是代表五个按键，其中一个是手动和自动模式之间的切换，另外四个是手动模式下，手动控制电机的上下左右四个方向的转动；X1  X2是连接晶振电路的；IN1-INT8是一个上拉排阻，它连接驱动芯片ULN2803，目的是提高输出电平，增加单片机的驱动能力；SDA、SCL分别代表连接I²C总线的数据线和时钟线
![image](https://github.com/STAR-K-007/sun/assets/90315370/9d932a0f-9a06-4b30-9f45-2cc58215c807)

**步进电机驱动电路**
  步进电机是将电脉冲转化为角位移的开环控制执行机构。步进电机又称为脉冲电动机，当步进驱动器接收到一个脉冲信号， 它就驱动步进电机按设定的方向转动一个固定的角度，称为“步距角”，它的旋转是以固定的角度一步一步运行的。可以通过控制脉冲个数来控制角位移量，从而达到准确定位的目的；同时可以通过控制脉冲频率来控制电机转动的速度和加速度，从而达到调速的目的。
  ![image](https://github.com/STAR-K-007/sun/assets/90315370/e1277c5d-448f-4480-9663-768687e77262) 

**单片机控制步进电机转动的程序**
  设定10为精度值，本设计中一共有上下左右四个光敏电阻（见下图），在光照下就会产生电压，上边电压大于下边电压或者两边电压值差大于10，或者手动模式下按下向下的按键，水平电机反转，若下边电压大于上边电压或者两边电压值差大于10，或者手动模式下按下向上的按键，水平电机正转。同理，左边电压大于右边电压或者两者差值大于10，或者手动模式下按下向右的按键，方位电机右转，若右边电压大于左边或者两者差值大于10，或者手动模式下按下向左的按键，方位电机左转。（详情请参见代码）
  
  
  ![image](https://github.com/STAR-K-007/sun/assets/90315370/b161df5d-818c-46ee-a20d-1c8b8dd2ad34)

  

